@model IEnumerable<UserDto>

@section Scripts{
    <script>
    // Edit UserDto Form
    function edit_form_open(Id, FirstName, SecondName, LastName,
                            Number, Password, Adress, EntryDate,
                            Balance, Status, Access, Picture){
        $("#UserDtoId").val(Id);
        $("#UserDtoFirstName").val(FirstName);
        $("#UserDtoSecondName").val(SecondName);
        $("#UserDtoLastName").val(LastName);
        $("#UserDtoNumber").val(Number);
        $("#UserDtoPassword").val(Password);
        $("#UserDtoAdress").val(Adress);
        $("#UserDtoEntryDate").val(EntryDate);
        $("#UserDtoBalance").val(Balance);
        $("#UserDtoStatus").val(Status);
        $("#UserDtoAccess").val(Access);


        alert(Id+' '+FirstName+' '+SecondName+' '+LastName+' '+Number+' '+Picture);
        $("#EditModal").modal('show');
    }
    function edit_form_confirm(){
         $.ajax({
            type: "POST",
                url: "@Url.Action("EditUser")",
            dataType: "text", // ? text or html 
            data: {
                Id: $('#UserDtoId').val(),
                FirstName: $('#UserDtoFirstName').val(),
                SecondName: $('#UserDtoSecondName').val(),
                LastName: $('#UserDtoLastName').val(),
                Number: $('#UserDtoNumber').val(),
                Password: $('#UserDtoPassword').val(),
                Adress: $('#UserDtoAdress').val(),
                EntryDate: $('#UserDtoEntryDate').val(),
                Balance: $('#UserDtoBalance').val(),
                Status: $('#UserDtoStatus').val(),
                Access: $('#UserDtoAccess').val(),
                Picture: $('#UserDtoPicture')
            },
            success: function (result) {
                $("#error_handler").html(result);
                alert(result);
            }
        });
    }
    function edit_form_close(){
        $("#EditModal").modal('hide');
    }
    // Delete UserDto Form
    function remove_form_open(userId){
        $("#DeleteModal").modal('show');
        $("#deleteUserId").val(userId);
    }
    function remove_form_confirm(){
            $.ajax({
                type: "POST",
                url: "@Url.Action("DeleteUser")",
                dataType: "text", // ? text or html
                data: {
                    userId: $('#UserDtoId').val()
                },
                success: function (result) {
                    $("#error_handler").html(result);
                    alert(result);
                }
            });
    }
    function remove_form_close(){
        $("#DeleteModal").modal('hide');
    }
    // GetUsers
    function get() {
        var name = $('#FIO').val();
        var number = $('#Number').val();
        var sort = $('#sortType').val();
            var filt = $('#filtType').val();
        $.ajax({
            type: "GET",
            url: "@Url.Action("GetUsers")",
            dataType: "html",
            data: {
                fio: name,
                number: number,
                sortType: sort,
                filtType: filt
            },
            success: function (result) {
                $("#result").html(result);
                alert(result);
            }
        });
    }
    </script>
}

<style>
    .bd-placeholder-img:hover{
            transform: scale(5);
            transition: 1s;
    }
</style>

<!-- Edit Form Modal -->
<div class="modal fade" id="EditModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Сохранение звонка в БД</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="edit_form_close()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h3 style="color:red;" id="error_handler"></h3>

                    <div class="form-floating">
                        <input type="text" class="form-control" id="UserDtoId" placeholder="">
                        <label for="floatingInput">Id пользователя</label>
                        <span class="badge bg-danger"></span>
                    </div>
                    </br>

                    <!-- Image -->

                    <div class="form-floating">
                        <input type="text" class="form-control" id="UserDtoFirstName" placeholder="">
                        <label for="floatingInput">Id пользователя</label>
                        <span class="badge bg-danger"></span>
                    </div>
                    </br>

                    <div class="form-floating">
                        <input type="text" class="form-control" id="UserDtoSecondName" placeholder="">
                        <label for="floatingInput">Имя</label>
                        <span class="badge bg-danger"></span>
                    </div>
                    </br>

                    <div class="form-floating">
                        <input type="text" class="form-control" id="UserDtoLastName" placeholder="">
                        <label for="floatingInput">Фамилия</label>
                        <span class="badge bg-danger"></span>
                    </div>
                    </br>

                    <div class="form-floating">
                        <input type="text" class="form-control" id="UserDtoNumber" placeholder="">
                        <label for="floatingInput">Отчество</label>
                        <span class="badge bg-danger"></span>
                    </div>
                    </br>

                    <div class="form-floating">
                        <input type="text" class="form-control" id="UserDtoPassword" placeholder="">
                        <label for="floatingInput">Пароль</label>
                        <span class="badge bg-danger"></span>
                    </div>
                    </br>

                    <div class="form-floating">
                        <input type="text" class="form-control" id="UserDtoAdress" placeholder="">
                        <label for="floatingInput">Адрес</label>
                        <span class="badge bg-danger"></span>
                    </div>
                    </br>

                    <div class="form-floating">
                        <input type="text" class="form-control" id="UserDtoEntryDate" placeholder="">
                        <label for="floatingInput">Дата регистрации</label>
                        <span class="badge bg-danger"></span>
                    </div>
                    </br>

                    <div class="form-floating">
                        <input type="text" class="form-control" id="UserDtoBalance" placeholder="">
                        <label for="floatingInput">Баланс</label>
                        <span class="badge bg-danger"></span>
                    </div>
                    </br>

                    <div class="form-floating">
                        <input type="text" class="form-control" id="UserDtoStatus" placeholder="">
                        <label for="floatingInput">Статус аккаунта</label>
                        <span class="badge bg-danger"></span>
                    </div>
                    </br>

                    <div class="form-floating">
                        <input type="text" class="form-control" id="UserDtoAccess" placeholder="">
                        <label for="floatingInput">Доступ аккаунта</label>
                        <span class="badge bg-danger"></span>
                    </div>
                    </br>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal" onclick="edit_form_close()">Закрыть</button>
                    <button type="button" class="btn btn-primary" onclick="save_form_confirm()">Сохранить</button>
                </div>
            </div>
        </div>
    </div>

<!-- Delete Form Modal -->
<div class="modal fade" id="DeleteModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Сохранение звонка в БД</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="remove_form_close()">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <h3 style="color:red;" id="error_handler"></h3>

                    <h2>Вы уверены, что хотите удалить пользователя?</h2>
                    <input type="hidden" id="deleteUserId"/>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal" onclick="remove_form_close()">Закрыть</button>
                    <button type="button" class="btn btn-primary" onclick="delete_form_confirm()">Сохранить</button>
                </div>
            </div>
        </div>
    </div>

<div class="container">
    <div class="bg-light p-5 rounded">
        <h1>Поиск пользователей</h1>
        
        <div class="inputs" style="display:inline-block;">
        </br>
        <input style="width:200px;" type="text" name="name" placeholder="ФИО пользователя" id="FIO" oninput="get()" />
        <input style="width:200px;" type="text" name="name" placeholder="ФИО пользователя" id="Number" oninput="get()" />
        </br>
        </div>

        <div class="inputs" style="display:inline-block;">
        <label for="exampleSelect1" class="form-label mt-4">Фильтрация</label>
            <select class="form-select" style="width:200px;" name="filt" value="" id="filtType" onchange="get()">
            <option>Нет</option>
            <option value="rus">Россия(+7)</option>
            <option value="by">Беларусь(+375)</option>
            <option value="mts">МТС(29)</option>
            <option value="life">LIFE(25)</option>
            <option value="life">LIFE(25)</option>
            <option value="balance">-Баланс</option>
        </select>
        </div>

        <div class="inputs" style="display:inline-block;">
        <label for="exampleSelect1" class="form-label mt-4">Сортировка</label>
            <select class="form-select" style="width:200px;" name="sort" value="" id="sortType" onchange="get()">
            <option>Нет</option>
            <option value="up">Алфавит↑</option>
            <option value="down">Алфавит↓</option>
        </select>
        </div>

        </br>
        </br>
</div>
</div>

<div id="result">

</div>